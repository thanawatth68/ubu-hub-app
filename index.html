<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBU Hub - Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- PWA & iOS Splash Screen -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="UBU Hub">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <link rel="apple-touch-startup-image" href="icon-512x512.png">

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .app-container { scrollbar-width: none; -ms-overflow-style: none; }
        .app-container::-webkit-scrollbar { display: none; }
        .page-content { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Animated Background --- */
        @keyframes animated-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .has-animated-bg {
            position: relative;
        }
        .has-animated-bg::before {
            content: '';
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            z-index: 0;
            background: linear-gradient(270deg, #eef2ff, #e0e7ff, #c7d2fe);
            background-size: 400% 400%;
            animation: animated-gradient 18s ease infinite;
        }
        .dark .has-animated-bg::before {
            background: linear-gradient(270deg, #1e293b, #334155, #111827);
        }
        .app-container {
           position: relative;
           z-index: 1;
           background: transparent;
        }

        /* --- Dark Mode styles --- */
        .dark .bg-white { background-color: #1f2937; }
        .dark .bg-white\/80 { background-color: rgba(31, 41, 55, 0.8); }
        .dark .text-gray-800 { color: #f9fafb; }
        .dark .text-gray-600 { color: #9ca3af; }
        .dark .text-gray-900 { color: #f9fafb; }
        .dark .text-gray-500 { color: #6b7280; }
        .dark .border-b { border-color: #374151; }
        .dark .border-t { border-color: #374151; }
        .dark .shadow-md { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.4), 0 2px 4px -2px rgba(0,0,0,0.4); }
        .dark .divide-y > :not([hidden]) ~ :not([hidden]) { border-color: #374151; }
        .dark input { background-color: #374151; color: #f9fafb; border-color: #4b5563; }
        .dark .filter-button-active { background-color: #4f46e5; color: white; }
    </style>
</head>
<body class="bg-gray-200 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-sm mx-auto has-animated-bg rounded-3xl shadow-2xl overflow-hidden border-4 border-gray-800 relative">
        <div class="h-[750px] overflow-y-auto app-container">
            
            <header class="sticky top-0 bg-white/80 backdrop-blur-sm z-10 p-4 flex justify-between items-center border-b">
                <div class="flex items-center space-x-2">
                    <button id="back-button" onclick="goBack()" class="hidden text-gray-600 p-2 -ml-2 rounded-full hover:bg-gray-100"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                    <div id="header-title"><h1 class="text-xl font-bold text-indigo-700">UBU HUB</h1><p class="text-xs text-gray-500">A central hub for UBU students</p></div>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="relative text-gray-600" onclick="navigateTo('notifications')"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg><span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span></span></button>
                    <img src="https://placehold.co/40x40/EFEFEF/333333?text=S" class="w-9 h-9 rounded-full cursor-pointer" alt="User Profile" onclick="navigateTo('settings')">
                </div>
            </header>

            <div id="main-content">
                <main id="page-home" class="page-content p-4 space-y-6">
                    <div><h2 class="text-2xl font-bold text-gray-800">Hello, Somchai</h2><p class="text-gray-600">Here's your curated news and information.</p></div>
                    
                    <div class="relative"><input id="search-input" type="text" placeholder="Search news..." class="w-full px-4 py-3 pr-10 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"><svg class="absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" /></svg></div>

                    <div class="flex space-x-2 overflow-x-auto pb-2 -mx-4 px-4"><button class="filter-button filter-button-active flex-shrink-0 bg-indigo-100 text-indigo-800 text-sm font-semibold px-4 py-2 rounded-full" data-filter="all">All</button><button class="filter-button flex-shrink-0 bg-gray-100 dark:bg-gray-700 text-gray-800 text-sm font-semibold px-4 py-2 rounded-full" data-filter="scholarship">Scholarship</button><button class="filter-button flex-shrink-0 bg-gray-100 dark:bg-gray-700 text-gray-800 text-sm font-semibold px-4 py-2 rounded-full" data-filter="activity">Activity</button><button class="filter-button flex-shrink-0 bg-gray-100 dark:bg-gray-700 text-gray-800 text-sm font-semibold px-4 py-2 rounded-full" data-filter="science">Science</button></div>

                    <section id="news-feed" class="space-y-4">
                        <a href="javascript:void(0);" onclick="showDetails('Scholarship Announcement', '...details...')" class="news-item block bg-white p-4 rounded-xl shadow-md border-l-4 border-green-500" data-tags="scholarship">...</a>
                        <a href="javascript:void(0);" onclick="showDetails('Computer Proficiency Test', '...details...')" class="news-item block bg-white p-4 rounded-xl shadow-md border-l-4 border-blue-500" data-tags="science 3rdyear">...</a>
                        <a href="javascript:void(0);" onclick="showDetails('Volunteer Camp Activity', '...details...')" class="news-item block bg-white p-4 rounded-xl shadow-md border-l-4 border-purple-500" data-tags="activity allyears">...</a>
                        <div id="no-results" class="hidden text-center py-10"><p class="text-gray-500">No matching news found.</p></div>
                    </section>
                </main>
                
                <main id="page-calendar" class="page-content p-4 space-y-6 hidden"></main>
                <main id="page-notifications" class="page-content p-4 space-y-6 hidden"></main>
                <main id="page-settings" class="page-content p-4 space-y-6 hidden"></main>
                <main id="page-details" class="page-content p-4 space-y-4 hidden"></main>
                <main id="page-interests" class="page-content p-4 space-y-4 hidden"></main>
                
                <main id="page-edit-profile" class="page-content p-4 space-y-4 hidden">
                    <div class="flex flex-col items-center space-y-4"><h2 class="text-2xl font-bold text-gray-800">Edit Profile</h2><img src="https://placehold.co/100x100/EFEFEF/333333?text=S" class="w-24 h-24 rounded-full" alt="User Profile"><div class="space-y-4 w-full"><div><label for="name" class="text-sm font-medium text-gray-700 dark:text-gray-300">Full Name</label><input type="text" id="name" value="Somchai Jaidee" class="mt-1 block w-full px-3 py-2 border rounded-md"></div><div><label for="faculty" class="text-sm font-medium text-gray-700 dark:text-gray-300">Faculty</label><input type="text" id="faculty" value="Faculty of Science" class="mt-1 block w-full px-3 py-2 border rounded-md"></div><div><label for="year" class="text-sm font-medium text-gray-700 dark:text-gray-300">Year of Study</label><input type="number" id="year" value="3" class="mt-1 block w-full px-3 py-2 border rounded-md"></div><button onclick="goBack()" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg">Save Changes</button></div></div>
                </main>

                <main id="page-notification-settings" class="page-content p-4 space-y-4 hidden"></main>
            </div>
            <div class="h-20"></div> 
        </div>

        <nav id="bottom-nav" class="absolute bottom-0 left-0 right-0 w-full max-w-sm mx-auto bg-white border-t rounded-b-3xl"></nav>

        <div id="logout-modal" class="hidden absolute inset-0 bg-black/40 z-20 flex items-center justify-center p-4"></div>
    </div>

    <script>
        // --- Dark Mode Logic ---
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
        }

        // --- Search and Filter Logic ---
        const searchInput = document.getElementById('search-input');
        const newsFeed = document.getElementById('news-feed');
        const newsItems = newsFeed.querySelectorAll('.news-item');
        const noResults = document.getElementById('no-results');
        const filterButtons = document.querySelectorAll('.filter-button');
        let activeFilter = 'all';

        function filterContent() {
            const searchTerm = searchInput.value.toLowerCase();
            let hasVisibleItems = false;
            newsItems.forEach(item => {
                const itemText = item.textContent.toLowerCase();
                const itemTags = item.dataset.tags;
                const matchesSearch = itemText.includes(searchTerm);
                const matchesFilter = activeFilter === 'all' || itemTags.includes(activeFilter);
                if (matchesSearch && matchesFilter) {
                    item.classList.remove('hidden');
                    hasVisibleItems = true;
                } else {
                    item.classList.add('hidden');
                }
            });
            noResults.classList.toggle('hidden', hasVisibleItems);
        }

        searchInput.addEventListener('input', filterContent);
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => {
                    btn.classList.remove('filter-button-active', 'bg-indigo-100', 'text-indigo-800');
                    btn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-800');
                });
                button.classList.add('filter-button-active', 'bg-indigo-100', 'text-indigo-800');
                button.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-800');
                activeFilter = button.dataset.filter;
                filterContent();
            });
        });

        // --- Navigation and Page Content (Existing Logic) ---
        let pageStack = [];
        // [Existing page navigation functions: renderPage, navigateTo, goBack, showDetails, updateNavHighlight, etc.]
        // This part is kept conceptually the same as before to save space.
        // The actual implementation would be here.
        // For demonstration, settings page content is modified to include dark mode toggle.
        const pageContents = {
            settings: `
                <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
                <div class="bg-white rounded-xl shadow-md divide-y">
                    <a href="javascript:void(0);" onclick="navigateTo('edit-profile')" class="p-4 flex justify-between items-center w-full text-left"><span class="text-gray-800">Edit Profile</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></a>
                    <a href="javascript:void(0);" onclick="navigateTo('interests')" class="p-4 flex justify-between items-center w-full text-left"><span class="text-gray-800">Manage Interests</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></a>
                    <label for="dark-mode-toggle" class="p-4 flex justify-between items-center w-full cursor-pointer">
                        <span class="text-gray-800">Dark Mode</span>
                        <div class="relative inline-flex items-center cursor-pointer">
                          <input type="checkbox" id="dark-mode-toggle" class="sr-only peer" onchange="toggleDarkMode()" ${document.documentElement.classList.contains('dark') ? 'checked' : ''}>
                          <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"></div>
                        </div>
                    </label>
                    <a href="javascript:void(0);" onclick="showLogoutModal()" class="p-4 flex justify-between items-center w-full text-left text-red-600"><span>Log Out</span></a>
                </div>`,
            // Other page contents remain here
        };
        // The rest of the navigation script would follow
        function renderPage(pageName) {
            // Your existing renderPage function...
            // It should be modified to handle the new settings page content
            const allPages = document.querySelectorAll('.page-content');
            allPages.forEach(p => p.classList.add('hidden'));
            const targetPage = document.getElementById(`page-${pageName}`);
            if (targetPage) {
                if (pageContents[pageName] && (targetPage.innerHTML.trim() === '' || pageName === 'settings')) {
                     targetPage.innerHTML = pageContents[pageName];
                }
                targetPage.classList.remove('hidden');
            }
             // ... rest of the function
        }
        
        // This is a placeholder for the full navigation logic
        function navigateTo(pageName){ pageStack.push(pageName); renderPage(pageName); }
        function goBack(){ pageStack.pop(); renderPage(pageStack[pageStack.length-1]); }
        // ... and so on
        document.addEventListener('DOMContentLoaded', () => { navigateTo('home'); });
    </script>
</body>
</html>

