<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBU Hub - Prototype</title>
    
    <!-- === คำสั่งพิเศษสำหรับ iPhone (ส่วนที่เพิ่มเข้ามา) === -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="UBU Hub">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <!-- =================================================== -->

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4f46e5">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS code here (same as before) */
        body { font-family: 'Sarabun', sans-serif; }
        .app-container { -ms-overflow-style: none; scrollbar-width: none; }
        .app-container::-webkit-scrollbar { display: none; }
        .page-content { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-200 flex items-center justify-center min-h-screen p-4">
    <!-- All body HTML here (same as before) -->
    <!-- ... a lot of HTML code ... -->
    <div class="w-full max-w-sm mx-auto bg-gray-50 rounded-3xl shadow-2xl overflow-hidden border-4 border-gray-800 relative">
        <div class="h-[750px] overflow-y-auto app-container">
            
            <!-- App Header -->
            <header class="sticky top-0 bg-white/80 backdrop-blur-sm z-10 p-4 flex justify-between items-center border-b">
                <div class="flex items-center space-x-2">
                    <button id="back-button" onclick="goBack()" class="hidden text-gray-600 p-2 -ml-2 rounded-full hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <div id="header-title">
                        <h1 class="text-xl font-bold text-indigo-700">UBU HUB</h1>
                        <p class="text-xs text-gray-500">A central hub for UBU students</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="relative text-gray-600" onclick="navigateTo('notifications')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
                        <span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span></span>
                    </button>
                    <img src="https://placehold.co/40x40/EFEFEF/333333?text=Somchai" class="w-9 h-9 rounded-full cursor-pointer" alt="User Profile" onclick="navigateTo('settings')">
                </div>
            </header>

            <!-- Main Content Area -->
            <div id="main-content">
                <!-- Page 1: Home -->
                <main id="page-home" class="page-content p-4 space-y-6">
                    <div><h2 class="text-2xl font-bold text-gray-800">Hello, Somchai</h2><p class="text-gray-600">Here's your curated news and information.</p></div>
                    <section>
                        <h3 class="text-lg font-bold text-gray-800 mb-3">Your Feed (Personalized)</h3>
                        <div class="space-y-4">
                            <a href="javascript:void(0);" onclick="showDetails('Scholarship Application Announcement for 2025', 'The Division of Student Affairs is now accepting applications for the annual scholarship program. Interested students must submit their applications by October 31, 2025. Please see the full criteria and download the application form from the university website.', ['Scholarship', 'All Years'])" class="block bg-white p-4 rounded-xl shadow-md border-l-4 border-green-500 hover:shadow-lg transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <div class="bg-green-100 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" viewBox="0 0 20 20" fill="currentColor"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" /><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" /></svg></div>
                                    <div><h4 class="font-bold text-gray-900">Scholarship Application Announcement for 2025</h4><p class="text-sm text-gray-600 mt-1">The Division of Student Affairs is now accepting applications...</p><div class="mt-2 flex flex-wrap gap-2"><span class="text-xs font-medium bg-green-100 text-green-800 px-2 py-1 rounded-full">Scholarship</span><span class="text-xs font-medium bg-gray-100 text-gray-800 px-2 py-1 rounded-full">All Years</span></div></div>
                                </div>
                            </a>
                            <a href="javascript:void(0);" onclick="showDetails('Computer Proficiency Test Schedule', 'For 3rd-year students in the Faculty of Science who have not yet met the requirements, the proficiency test will be held on November 15, 2025. Please register through the faculty\'s online portal.', ['Faculty of Science', '3rd Year'])" class="block bg-white p-4 rounded-xl shadow-md border-l-4 border-blue-500 hover:shadow-lg transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <div class="bg-blue-100 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg></div>
                                    <div><h4 class="font-bold text-gray-900">Computer Proficiency Test Schedule</h4><p class="text-sm text-gray-600 mt-1">For 3rd-year students who have not yet met the requirements...</p><div class="mt-2 flex flex-wrap gap-2"><span class="text-xs font-medium bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Faculty of Science</span><span class="text-xs font-medium bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">3rd Year</span></div></div>
                                </div>
                            </a>
                        </div>
                    </section>
                </main>
                
                <main id="page-calendar" class="page-content p-4 space-y-6 hidden"></main>
                <main id="page-notifications" class="page-content p-4 space-y-6 hidden"></main>
                <main id="page-settings" class="page-content p-4 space-y-6 hidden"></main>
                
                <main id="page-details" class="page-content p-4 space-y-4 hidden">
                    <h2 id="details-title" class="text-2xl font-bold text-gray-800"></h2>
                    <div id="details-tags" class="flex flex-wrap gap-2"></div>
                    <p id="details-content" class="text-gray-700 leading-relaxed"></p>
                </main>

                <main id="page-interests" class="page-content p-4 space-y-4 hidden"></main>
                
                <main id="page-edit-profile" class="page-content p-4 space-y-4 hidden">
                    <h2 class="text-2xl font-bold text-gray-800">Edit Profile</h2>
                    <div class="space-y-4">
                        <div><label for="name" class="text-sm font-medium text-gray-700">Full Name</label><input type="text" id="name" value="Somchai Jaidee" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></div>
                        <div><label for="faculty" class="text-sm font-medium text-gray-700">Faculty</label><input type="text" id="faculty" value="Faculty of Science" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></div>
                        <div><label for="year" class="text-sm font-medium text-gray-700">Year of Study</label><input type="number" id="year" value="3" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></div>
                        <button onclick="goBack()" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors">Save Changes</button>
                    </div>
                </main>

                <main id="page-notification-settings" class="page-content p-4 space-y-4 hidden">
                     <h2 class="text-2xl font-bold text-gray-800">Notification Settings</h2>
                     <div class="bg-white rounded-xl shadow-md divide-y">
                        <label class="p-4 flex justify-between items-center w-full cursor-pointer"><span class="text-gray-800">In-App Notifications</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300" checked></label>
                        <label class="p-4 flex justify-between items-center w-full cursor-pointer"><span class="text-gray-800">Email Notifications</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300" checked></label>
                        <label class="p-4 flex justify-between items-center w-full cursor-pointer"><span class="text-gray-800">SMS for Urgent Alerts</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"></label>
                     </div>
                </main>

            </div>

            <div class="h-20"></div> 
        </div>

        <!-- Bottom Navigation -->
        <nav id="bottom-nav" class="absolute bottom-0 left-0 right-0 w-full max-w-sm mx-auto bg-white border-t rounded-b-3xl">
            <div class="flex justify-around py-2">
                <a id="nav-home" href="javascript:void(0);" onclick="navigateTo('home')" class="flex flex-col items-center text-indigo-600 w-1/4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg><span class="text-xs font-bold">Home</span></a>
                <a id="nav-calendar" href="javascript:void(0);" onclick="navigateTo('calendar')" class="flex flex-col items-center text-gray-500 w-1/4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg><span class="text-xs">Calendar</span></a>
                <a id="nav-notifications" href="javascript:void(0);" onclick="navigateTo('notifications')" class="flex flex-col items-center text-gray-500 w-1/4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg><span class="text-xs">Notifications</span></a>
                <a id="nav-settings" href="javascript:void(0);" onclick="navigateTo('settings')" class="flex flex-col items-center text-gray-500 w-1/4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0 3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg><span class="text-xs">Settings</span></a>
            </div>
        </nav>

        <!-- Logout Modal -->
        <div id="logout-modal" class="hidden absolute inset-0 bg-black/40 z-20 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl p-6 text-center shadow-xl max-w-xs mx-auto">
                <h3 class="text-lg font-bold text-gray-900">Log Out</h3>
                <p class="text-sm text-gray-600 mt-2">Are you sure you want to log out?</p>
                <div class="mt-6 flex justify-center space-x-4">
                    <button onclick="hideLogoutModal()" class="px-6 py-2 rounded-lg bg-gray-200 text-gray-800 font-semibold hover:bg-gray-300">Cancel</button>
                    <button onclick="logout()" class="px-6 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700">Log Out</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // All JavaScript code here (same as before)
        const pageContents = {
            calendar: `
                <h2 class="text-2xl font-bold text-gray-800">Academic Calendar</h2>
                <div class="bg-white p-4 rounded-xl shadow-md space-y-4">
                    <div class="flex items-center space-x-3"><div class="w-12 h-12 bg-indigo-100 text-indigo-700 rounded-lg flex flex-col items-center justify-center font-bold"><span class="text-xs">Oct</span><span class="text-xl">15</span></div><div><h4 class="font-semibold text-gray-800">Midterm Exam: SC101</h4><p class="text-sm text-gray-500">Time 09:00 - 12:00 | Room SC301</p></div></div><div class="border-t"></div>
                    <div class="flex items-center space-x-3"><div class="w-12 h-12 bg-red-100 text-red-700 rounded-lg flex flex-col items-center justify-center font-bold"><span class="text-xs">Oct</span><span class="text-xl">20</span></div><div><h4 class="font-semibold text-gray-800">Tuition Fee Payment Deadline</h4><p class="text-sm text-gray-500">Semester 2/2025</p></div></div><div class="border-t"></div>
                    <div class="flex items-center space-x-3"><div class="w-12 h-12 bg-gray-100 text-gray-700 rounded-lg flex flex-col items-center justify-center font-bold"><span class="text-xs">Nov</span><span class="text-xl">05</span></div><div><h4 class="font-semibold text-gray-800">Semester Start Date</h4><p class="text-sm text-gray-500">Semester 2/2025</p></div></div>
                </div>`,
            notifications: `
                <h2 class="text-2xl font-bold text-gray-800">Notifications</h2>
                <div class="space-y-3">
                    <div class="bg-white p-4 rounded-xl shadow-md flex items-start space-x-3"><div class="bg-blue-100 p-2 rounded-full mt-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg></div><div><p class="text-sm text-gray-800">The library will close early on Oct 10th at 16:00.</p><p class="text-xs text-gray-400 mt-1">1 hour ago</p></div></div>
                    <div class="bg-blue-50/50 p-4 rounded-xl shadow-sm flex items-start space-x-3"><div class="bg-gray-100 p-2 rounded-full mt-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg></div><div><p class="text-sm text-gray-500">Course materials for SC101 have been uploaded.</p><p class="text-xs text-gray-400 mt-1">1 day ago</p></div></div>
                </div>`,
            settings: `
                <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
                <div class="bg-white rounded-xl shadow-md divide-y">
                    <a href="javascript:void(0);" onclick="navigateTo('edit-profile')" class="p-4 flex justify-between items-center w-full text-left"><span class="text-gray-800">Edit Profile</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></a>
                    <a href="javascript:void(0);" onclick="navigateTo('interests')" class="p-4 flex justify-between items-center w-full text-left"><span class="text-gray-800">Manage Interests</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></a>
                    <a href="javascript:void(0);" onclick="navigateTo('notification-settings')" class="p-4 flex justify-between items-center w-full text-left"><span class="text-gray-800">Notification Settings</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></a>
                    <a href="javascript:void(0);" onclick="showLogoutModal()" class="p-4 flex justify-between items-center w-full text-left text-red-600"><span>Log Out</span></a>
                </div>`,
            interests: `
                <h2 class="text-2xl font-bold text-gray-800">Manage Interests</h2>
                <p class="text-sm text-gray-600">Select topics to personalize your feed.</p>
                <div class="space-y-3">
                    <label class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm"><span class="font-semibold text-gray-800">Scholarships</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300" checked></label>
                    <label class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm"><span class="font-semibold text-gray-800">Internships</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"></label>
                    <label class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm"><span class="font-semibold text-gray-800">Sports & Recreation</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300" checked></label>
                    <label class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm"><span class="font-semibold text-gray-800">Workshops</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"></label>
                    <label class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm"><span class="font-semibold text-gray-800">Volunteer Activities</span><input type="checkbox" class="h-6 w-6 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"></label>
                </div>`,
        };
        let pageStack = [];

        function renderPage(pageName) {
            const allPages = document.querySelectorAll('.page-content');
            allPages.forEach(p => p.classList.add('hidden'));
            const targetPage = document.getElementById(`page-${pageName}`);
            if (targetPage) {
                if (pageContents[pageName] && targetPage.innerHTML.trim() === '') {
                     targetPage.innerHTML = pageContents[pageName];
                }
                targetPage.classList.remove('hidden');
            }
            const mainPages = ['home', 'calendar', 'notifications', 'settings'];
            const isSubPage = !mainPages.includes(pageName);
            document.getElementById('back-button').classList.toggle('hidden', !isSubPage);
            document.getElementById('header-title').classList.toggle('hidden', isSubPage);
            document.getElementById('bottom-nav').classList.toggle('hidden', isSubPage);
            updateNavHighlight(pageName);
            document.querySelector('.app-container').scrollTop = 0;
        }
        
        function navigateTo(pageName) {
            const currentPage = pageStack.length > 0 ? pageStack[pageStack.length - 1] : null;
            if (pageName !== currentPage) {
                pageStack.push(pageName);
            }
            renderPage(pageName);
        }

        function goBack() {
            if (document.getElementById('logout-modal').classList.contains('hidden') === false) {
                hideLogoutModal();
                return;
            }
            if (pageStack.length > 1) {
                pageStack.pop();
                renderPage(pageStack[pageStack.length - 1]);
            }
        }

        function showDetails(title, content, tags) {
            navigateTo('details');
            document.getElementById('details-title').textContent = title;
            document.getElementById('details-content').textContent = content;
            const tagsContainer = document.getElementById('details-tags');
            tagsContainer.innerHTML = '';
            tags.forEach(tag => {
                const span = document.createElement('span');
                span.className = 'text-xs font-medium bg-gray-100 text-gray-800 px-2 py-1 rounded-full';
                span.textContent = tag;
                tagsContainer.appendChild(span);
            });
        }

        function updateNavHighlight(pageName) {
            const mainPages = ['home', 'calendar', 'notifications', 'settings'];
            let basePage = 'home'; 
            if (mainPages.includes(pageName)) {
                basePage = pageName;
            } else if (['edit-profile', 'interests', 'notification-settings'].includes(pageName)) {
                basePage = 'settings';
            }
            mainPages.forEach(p => {
                const link = document.getElementById(`nav-${p}`);
                const span = link.querySelector('span');
                if (p === basePage) {
                    link.classList.remove('text-gray-500'); link.classList.add('text-indigo-600'); span.classList.add('font-bold');
                } else {
                    link.classList.remove('text-indigo-600'); link.classList.add('text-gray-500'); span.classList.remove('font-bold');
                }
            });
        }
        
        function showLogoutModal() { document.getElementById('logout-modal').classList.remove('hidden'); }
        function hideLogoutModal() { document.getElementById('logout-modal').classList.add('hidden'); }
        function logout() {
            hideLogoutModal();
            pageStack = []; 
            navigateTo('home'); 
        }

        document.addEventListener('DOMContentLoaded', () => { navigateTo('home'); });
        
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js').then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, err => {
              console.log('ServiceWorker registration failed: ', err);
            });
          });
        }
    </script>
</body>
</html>
